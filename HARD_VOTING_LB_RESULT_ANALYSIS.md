# Hard Voting LBçµæœåˆ†æ

**æå‡ºæ—¥**: 2025-10-21
**æå‡ºãƒ•ã‚¡ã‚¤ãƒ«**: `submission_top3_hardvoting_10features.csv`
**LB Score**: **0.76794**

---

## çµæœã‚µãƒãƒªãƒ¼

| æå‡º | ãƒ¢ãƒ‡ãƒ« | OOF Score | LB Score | CV-LB Gap | Gapè©•ä¾¡ |
|------|--------|-----------|----------|-----------|---------|
| 1st | Soft Voting + é–¾å€¤0.4236 | 0.8260 | 0.75837 | 0.06763 (6.76%) | âŒ è¦æ³¨æ„ |
| 2nd | **Hard Voting + é–¾å€¤0.5** | **0.8305** | **0.76794** | **0.06256 (6.26%)** | âš ï¸ è¦æ³¨æ„ |

### æ”¹å–„åº¦

- **LB Scoreæ”¹å–„**: 0.75837 â†’ 0.76794 = **+0.00957** (+0.957%)
- **Gapæ”¹å–„**: 6.76% â†’ 6.26% = **-0.50ãƒã‚¤ãƒ³ãƒˆ**

---

## âœ… æ¤œè¨¼çµæœ: Hard Voting > Soft Voting

### ä»®èª¬1ã®æ¤œè¨¼çµæœ: **éƒ¨åˆ†çš„ã«æ­£ã—ã„**

**ä»®èª¬**: Soft Votingã‚ˆã‚ŠHard Votingã®æ–¹ãŒæ±åŒ–æ€§èƒ½ãŒé«˜ã„

**æ¤œè¨¼çµæœ**:
- âœ… Hard Voting LB (0.76794) > Soft Voting LB (0.75837)
- âœ… LB Scoreã§ **+0.957%ã®æ”¹å–„**
- âœ… CV-LB Gapã‚‚æ”¹å–„ï¼ˆ6.76% â†’ 6.26%ï¼‰

**çµè«–**: Hard Votingã¯ç¢ºã‹ã«Soft Votingã‚ˆã‚Šå„ªã‚Œã¦ã„ã‚‹

---

## âš ï¸ æ®‹ã‚‹å•é¡Œ: ä¾ç„¶ã¨ã—ã¦å¤§ããªCV-LB Gap

### Gapåˆ†æ

| æŒ‡æ¨™ | å€¤ | è©•ä¾¡ |
|------|-----|------|
| OOF Score | 0.8305 | å„ªç§€ |
| LB Score | 0.76794 | æ™®é€š |
| **CV-LB Gap** | **0.06256** | **6.26%ï¼ˆè¦æ³¨æ„ãƒ¬ãƒ™ãƒ«ï¼‰** |

**Gapè©•ä¾¡åŸºæº–**:
- å„ªç§€: < 3%
- è¨±å®¹ç¯„å›²: 3-5%
- è¦æ³¨æ„: 5-8% â† **ç¾åœ¨ã“ã“**
- æ·±åˆ»: > 8%

### å•é¡Œã®æœ¬è³ª

Hard Votingã«å¤‰æ›´ã—ã¦ã‚‚GapãŒ6.26%ã¨ä¾ç„¶å¤§ãã„ç†ç”±:

1. **é–¾å€¤æœ€é©åŒ–ã ã‘ãŒåŸå› ã§ã¯ãªã„**
   - Softâ†’Hardã§æ”¹å–„ã—ãŸãŒã€Gapã¯æ®‹å­˜
   - ä»–ã®æ§‹é€ çš„å•é¡ŒãŒå­˜åœ¨

2. **è€ƒãˆã‚‰ã‚Œã‚‹ä¸»è¦å› **:
   - âŒ ~~Soft Voting vs Hard Voting~~ â†’ âœ… **è§£æ±ºæ¸ˆã¿**
   - âš ï¸ **ç‰¹å¾´é‡ã®æ±åŒ–æ€§èƒ½ä¸è¶³**ï¼ˆDeck_Safeç­‰ï¼‰
   - âš ï¸ **ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚±ãƒ¼ã‚¸**ï¼ˆStratifiedKFoldã®å•é¡Œï¼‰
   - âš ï¸ **Train/Teståˆ†å¸ƒã®é•ã„**

---

## ğŸ” è©³ç´°åˆ†æ: å„ãƒ¢ãƒ‡ãƒ«ã®Gapæ¯”è¼ƒ

### OOF vs LB Gapï¼ˆæ¨å®šï¼‰

Hard Votingã®ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«æ§‹æˆãƒ¢ãƒ‡ãƒ«ã®OOFã‚¹ã‚³ã‚¢:

| ãƒ¢ãƒ‡ãƒ« | OOF Score | OOF Gap | æ¨å®šLB | æ¨å®šLB Gap |
|--------|-----------|---------|--------|-----------|
| LightGBMï¼ˆå¼·æ­£å‰‡åŒ–ï¼‰ | 0.8248 | 0.0191 | 0.75-0.77? | 5-7%? |
| GradientBoostingï¼ˆè¶…å¼·æ­£å‰‡åŒ–ï¼‰ | 0.8146 | 0.0135 | 0.74-0.76? | 5-7%? |
| RandomForestï¼ˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ï¼‰ | 0.8180 | 0.0022 | 0.77-0.79? | 3-5%? |
| **Hard Voting** | **0.8305** | **0.0112** | **0.76794** | **6.26%** |

**è¦³å¯Ÿ**:
- Hard Votingã®OOF Gap: 0.0112ï¼ˆå„ªç§€ï¼‰
- ã—ã‹ã—CV-LB Gap: 6.26%ï¼ˆè¦æ³¨æ„ï¼‰
- **OOF GapãŒå°ã•ãã¦ã‚‚LB Gapã¯å¤§ãã„** = Train/Testã®åˆ†å¸ƒãŒç•°ãªã‚‹

---

## ğŸ¯ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: æ ¹æœ¬åŸå› ã®ç‰¹å®š

### å„ªå…ˆåº¦1: Deck_Safeç‰¹å¾´é‡ã®æ¤œè¨¼

**ä»®èª¬**: Deck_Safeç‰¹å¾´é‡ãŒTrain/Testã§åŠ¹æœãŒç•°ãªã‚‹

**æ¤œè¨¼æ–¹æ³•**: 9ç‰¹å¾´é‡ãƒ¢ãƒ‡ãƒ«ï¼ˆDeck_Safeé™¤å¤–ï¼‰ã‚’æå‡º

**æå‡ºãƒ•ã‚¡ã‚¤ãƒ«**: `submission_top3_hardvoting_lightgbm_gb_rf.csv`

**æœŸå¾…çµæœ**:
- **ã‚·ãƒŠãƒªã‚ªA**: 9ç‰¹å¾´LB â‰¥ 0.77 â†’ Deck_SafeãŒæ‚ªå½±éŸ¿
- **ã‚·ãƒŠãƒªã‚ªB**: 9ç‰¹å¾´LB < 0.76 â†’ Deck_Safeã¯æœ‰åŠ¹ã€ä»–ã«åŸå› 

---

### å„ªå…ˆåº¦2: é–¾å€¤æœ€é©åŒ–ã®å†æ¤œè¨¼ï¼ˆå¿µã®ãŸã‚ï¼‰

**ä»®èª¬**: é–¾å€¤0.4236ãŒä¾ç„¶ã¨ã—ã¦å•é¡Œ

**æ¤œè¨¼æ–¹æ³•**: Soft Voting + ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¾å€¤0.5ã‚’æå‡º

**æå‡ºãƒ•ã‚¡ã‚¤ãƒ«**: `submission_threshold_default_0.5.csv`

**æœŸå¾…çµæœ**:
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0.5ã®LB > é–¾å€¤æœ€é©åŒ–0.4236ã®LB â†’ é–¾å€¤æœ€é©åŒ–ãŒéå­¦ç¿’
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0.5ã®LB â‰ˆ é–¾å€¤æœ€é©åŒ–0.4236ã®LB â†’ é–¾å€¤æœ€é©åŒ–ã¯å•é¡Œãªã„

---

### å„ªå…ˆåº¦3ï¼ˆé•·æœŸæ”¹å–„ï¼‰: CVæˆ¦ç•¥ã®è¦‹ç›´ã—

**å•é¡Œ**: StratifiedKFoldãŒTicketã‚°ãƒ«ãƒ¼ãƒ—ã‚’è€ƒæ…®ã—ã¦ã„ãªã„

**è§£æ±ºç­–**: Stratified Group K-Foldå®Ÿè£…

**å®Ÿè£…å†…å®¹**:
```python
from sklearn.model_selection import StratifiedGroupKFold

# Ticketã‚°ãƒ«ãƒ¼ãƒ—ã‚’è€ƒæ…®ã—ãŸCVåˆ†å‰²
sgkf = StratifiedGroupKFold(n_splits=5, shuffle=True, random_state=42)
for fold, (train_idx, val_idx) in enumerate(sgkf.split(X, y, groups=ticket_groups)):
    # åŒã˜Ticketã‚°ãƒ«ãƒ¼ãƒ—ãŒTrain/Validationã«åˆ†æ•£ã—ãªã„
    ...
```

**æœŸå¾…åŠ¹æœ**:
- ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚±ãƒ¼ã‚¸é˜²æ­¢
- ã‚ˆã‚Šæ­£ç¢ºãªCVè©•ä¾¡
- CV-LB Gapã®ç¸®å°

---

## ğŸ“Š ç¾æ™‚ç‚¹ã§ã®ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«

### LBã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆåˆ¤æ˜åˆ†ï¼‰

| é †ä½ | æå‡ºãƒ•ã‚¡ã‚¤ãƒ« | LB Score | CV Score | Gap |
|------|------------|----------|----------|-----|
| ğŸ¥‡ | submission_top3_hardvoting_10features.csv | **0.76794** | 0.8305 | 6.26% |
| ğŸ¥ˆ | submission_threshold_optimal_Youden_ROC.csv | 0.75837 | 0.8260 | 6.76% |
| â“ | submission_top3_hardvoting_lightgbm_gb_rf.csv (9ç‰¹å¾´) | ??? | ä¸æ˜ | ??? |
| â“ | submission_threshold_default_0.5.csv | ??? | 0.8249 | ??? |

**æš«å®šãƒ™ã‚¹ãƒˆ**: Hard Voting 10ç‰¹å¾´ï¼ˆLB 0.76794ï¼‰

---

## ğŸš€ æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®æå‡º

### æå‡º1: 9ç‰¹å¾´é‡Hard Votingï¼ˆæœ€å„ªå…ˆï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `submission_top3_hardvoting_lightgbm_gb_rf.csv`

**ç›®çš„**: Deck_Safeç‰¹å¾´é‡ã®åŠ¹æœæ¤œè¨¼

**æœŸå¾…LB**:
- è‰¯å¥½ã‚·ãƒŠãƒªã‚ª: **0.77-0.79**ï¼ˆDeck_SafeãŒé€†åŠ¹æœã ã£ãŸå ´åˆï¼‰
- ä¸­ç«‹ã‚·ãƒŠãƒªã‚ª: **0.76-0.77**ï¼ˆDeck_Safeã¯åŠ¹æœãªã—ï¼‰
- æ‚ªåŒ–ã‚·ãƒŠãƒªã‚ª: **< 0.76**ï¼ˆDeck_Safeã¯æœ‰åŠ¹ã ã£ãŸï¼‰

**åˆ¤æ–­åŸºæº–**:
- 9ç‰¹å¾´LB â‰¥ 0.77 â†’ Deck_Safeé™¤å¤–ã‚’ç¶™ç¶šã€ç‰¹å¾´é‡æ”¹å–„ã¸
- 9ç‰¹å¾´LB < 0.76 â†’ 10ç‰¹å¾´ç¶­æŒã€CVæˆ¦ç•¥æ”¹å–„ã¸

---

### æå‡º2: Soft Voting + ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¾å€¤0.5ï¼ˆå‚è€ƒï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `submission_threshold_default_0.5.csv`

**ç›®çš„**: é–¾å€¤æœ€é©åŒ–ã®åŠ¹æœå†æ¤œè¨¼

**æœŸå¾…LB**: 0.754-0.76

**åˆ¤æ–­åŸºæº–**:
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0.5 > é–¾å€¤0.4236 â†’ é–¾å€¤æœ€é©åŒ–ãŒéå­¦ç¿’
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0.5 â‰ˆ é–¾å€¤0.4236 â†’ Soft Votingè‡ªä½“ãŒå•é¡Œ

---

## ğŸ“ˆ ç›®æ¨™ã¨ç¾çŠ¶

### çŸ­æœŸç›®æ¨™ï¼ˆç¾åœ¨ã®æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ï¼‰

| ç›®æ¨™ | ç¾çŠ¶ | é”æˆåº¦ |
|------|------|--------|
| LB Score 0.78ä»¥ä¸Š | 0.76794 | âŒ æœªé”æˆï¼ˆ-1.2%ï¼‰ |
| CV-LB Gap 3%ä»¥ä¸‹ | 6.26% | âŒ æœªé”æˆï¼ˆ+3.26%ï¼‰ |
| Hard Votingæ¡ç”¨ | âœ… æ¡ç”¨æ¸ˆã¿ | âœ… é”æˆ |

### ä¸­æœŸç›®æ¨™

| ç›®æ¨™ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|-----------|
| LB 0.80ä»¥ä¸Š | ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°æ”¹å–„ |
| Gap 2%ä»¥ä¸‹ | Stratified Group K-Foldå®Ÿè£… |
| ä¸Šä½10%å…¥ã‚Š | Stacking/Calibrationå°å…¥ |

---

## ğŸ“ å­¦ã‚“ã ã“ã¨

### âœ… æ¤œè¨¼ã§ããŸã“ã¨

1. **Hard Voting > Soft Voting**
   - LB Score: +0.957%æ”¹å–„
   - Gap: -0.50ãƒã‚¤ãƒ³ãƒˆæ”¹å–„
   - ä»Šå¾Œã¯Hard Votingã‚’æ¨™æº–æ¡ç”¨

2. **é–¾å€¤æœ€é©åŒ–ã¯å‰¯æ¬¡çš„å•é¡Œ**
   - Hard Votingï¼ˆé–¾å€¤0.5ï¼‰ã§ã‚‚6.26% Gapæ®‹å­˜
   - ä¸»åŸå› ã¯ä»–ã«ã‚ã‚‹

### âš ï¸ æœªè§£æ±ºã®å•é¡Œ

1. **6.26%ã®CV-LB Gap**
   - ä¾ç„¶ã¨ã—ã¦è¦æ³¨æ„ãƒ¬ãƒ™ãƒ«
   - ç‰¹å¾´é‡ã¾ãŸã¯CVæˆ¦ç•¥ã«å•é¡Œ

2. **Train/Teståˆ†å¸ƒã®é•ã„**
   - OOF Gapã¯å°ã•ã„ï¼ˆ1.12%ï¼‰ã®ã«LB Gapã¯å¤§ãã„ï¼ˆ6.26%ï¼‰
   - Trainå†…ã®CVã¯æ­£ç¢ºã ãŒTestã¨ã¯ç•°ãªã‚‹

### ğŸ”œ æ¬¡ã®é‡ç‚¹èª²é¡Œ

1. **Deck_Safeç‰¹å¾´é‡ã®æ¤œè¨¼**ï¼ˆå„ªå…ˆåº¦æœ€é«˜ï¼‰
2. **CVæˆ¦ç•¥ã®æ”¹å–„**ï¼ˆä¸­æœŸæ”¹å–„ï¼‰
3. **æ–°ã—ã„ç‰¹å¾´é‡ã®è¿½åŠ **ï¼ˆé•·æœŸæ”¹å–„ï¼‰

---

## ã¾ã¨ã‚

### ç¾çŠ¶è©•ä¾¡

**è‰¯ã‹ã£ãŸç‚¹**:
- âœ… Hard VotingãŒSoft Votingã‚ˆã‚Šå„ªã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- âœ… LB Scoreã‚’0.76794ã¾ã§æ”¹å–„ï¼ˆå‰å›+0.957%ï¼‰
- âœ… CV-LB Gapã‚‚6.76%â†’6.26%ã«æ”¹å–„

**èª²é¡Œ**:
- âŒ CV-LB Gap 6.26%ã¯ä¾ç„¶ã¨ã—ã¦å¤§ãã„
- âŒ LB 0.78ç›®æ¨™ã«æœªé”ï¼ˆ-1.2%ï¼‰
- âŒ æ ¹æœ¬åŸå› ï¼ˆç‰¹å¾´é‡ or CVæˆ¦ç•¥ï¼‰æœªç‰¹å®š

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**å³åº§ã«å®Ÿæ–½**:
1. 9ç‰¹å¾´é‡Hard Votingæå‡º â†’ Deck_SafeåŠ¹æœæ¤œè¨¼
2. çµæœã«å¿œã˜ã¦æ–¹é‡æ±ºå®š:
   - 9ç‰¹å¾´LB > 10ç‰¹å¾´LB â†’ ç‰¹å¾´é‡æ”¹å–„è·¯ç·š
   - 9ç‰¹å¾´LB < 10ç‰¹å¾´LB â†’ CVæˆ¦ç•¥æ”¹å–„è·¯ç·š

**ä¸­æœŸå®Ÿæ–½**:
- Stratified Group K-Foldå®Ÿè£…
- äº¤äº’ä½œç”¨ç‰¹å¾´é‡è¿½åŠ ï¼ˆSexÃ—Pclassç­‰ï¼‰
- Probability Calibrationå°å…¥

---

**ä½œæˆæ—¥**: 2025-10-21
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: `submission_top3_hardvoting_lightgbm_gb_rf.csv`ï¼ˆ9ç‰¹å¾´é‡ï¼‰ã‚’æå‡ºã—ã¦Deck_SafeåŠ¹æœã‚’æ¤œè¨¼
